<!doctype html>
<html>
  <head>
    <title>Roles</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
  </head>

  <body>
    <div class="container">
      <h2>Add Role</h2>

      <!-- IMPORTANT: enctype added -->
      <form method="post" enctype="multipart/form-data">
        <label>Client</label>
        <select name="client_id">
          {% for c in clients %}
          <option value="{{ c[0] }}">{{ c[1] }}</option>
          {% endfor %}
        </select>

        <label>Role Title</label>
        <input type="text" name="title" required />

        <label>Job Description</label>
        <textarea name="jd_text"></textarea>

        <!-- NEW: JD Attachment -->
        <label>Job Description File (PDF/DOC)</label>
        <input type="file" name="jd_file" accept=".pdf,.doc,.docx" />

        <label>Status</label>
        <select name="status">
          <option>Open</option>
          <option>Closed</option>
        </select>

        <button>Add Role</button>
      </form>

      <h2>Roles</h2>
      <table>
        <tr>
          <th>ID</th>
          <th>Client</th>
          <th>Role</th>
          <th>Status</th>
          <th>JD File</th>
          <th>Action</th>
        </tr>

        {% for r in roles %}
        <tr>
          <td>{{ r[0] }}</td>
          <td>{{ r[1] }}</td>
          <td>{{ r[2] }}</td>
          <td>{{ r[3] }}</td>

          <!-- JD FILE PATH -->
          <td>{% if r[4] %} {{ r[4] }} {% else %} Not Uploaded {% endif %}</td>

          <td>
            <a
              href="/delete_role/{{ r[0] }}"
              onclick="
                return confirm('Are you sure you want to delete this role?');
              "
            >
              Delete
            </a>
          </td>
        </tr>
        {% endfor %}
      </table>

      <hr />

      <!-- Navigation -->
      <div class="nav">
        <a href="/clients">Clients</a> | <a href="/roles">Roles</a> |
        <a href="/candidates">Candidates</a> |
        <a href="/applications">Applications</a>
      </div>
    </div>
  </body>
</html>
